/* ----------------------------
   Base / Theme (Soft Pink)
   ---------------------------- */
:root{
  --bg: #fff5f4;         /* page background */
  --card: #fff2f2;       /* letter/card background */
  --accent: #ff8fa3;     /* main accent (button / heart) */
  --muted: #8b6b6b;      /* secondary text */
  --text: #2a2a2a;       /* primary text */
  --shadow: rgba(15,15,15,0.12);
  --maxwidth: 1100px;
  --poppins: 'Poppins', sans-serif;

  /* Pastel rainbow PR2 (balanced) */
  --pr-1: #ffd6e0;
  --pr-2: #ffd9f0;
  --pr-3: #e6e6ff;
  --pr-4: #d6f7ff;
  --pr-5: #e8ffe6;
  --blush: rgba(255,111,133,0.14); /* P1: Blush Pink soft */
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:var(--poppins);
  background:var(--bg);
  color:var(--text);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  display:flex;
  flex-direction:column;
  align-items:center;
}

/* Top nav - centered side-by-side tabs (N1) */
.topbar{
  width:100%;
  display:flex;
  justify-content:center;
  padding:18px 10px 6px;
  z-index:20;
}
.topbar nav{
  display:flex;
  gap:14px;
}

/* Base tab style: black background, white text, pill shape (S1) */
.tab{
  background:#000;
  color:#fff;
  border:none;
  padding:10px 18px;
  border-radius:999px;
  font-weight:700;
  letter-spacing:1px;
  cursor:pointer;
  position:relative;
  transition: transform 0.18s ease, opacity 0.18s ease;
  box-shadow: 0 6px 18px rgba(0,0,0,0.08);
}

/* Inactive subtle state */
.tab:not(.active){
  opacity:0.92;
  transform: none;
}

.tab.active {
  color: black; /* Change text color to black */
  z-index: 5;
  box-shadow: 0 8px 32px rgba(255,111,133,0.09), 0 4px 12px rgba(0,0,0,0.06);
}

.tab.active::before {
  content: "";
  position: absolute;
  inset: -6px; /* expands outwards to create a border/glow */
  border-radius: 999px;
  background: linear-gradient(90deg, var(--pr-1), var(--pr-2), var(--pr-3), var(--pr-4), var(--pr-5));
  filter: blur(8px);
  opacity: 0.95;
  z-index: -2;
  transition: opacity 0.35s ease, transform 0.35s ease;
}


/* subtle inner blush aura using box-shadow on the active tab */
.tab.active {
  box-shadow: 0 8px 32px rgba(255,111,133,0.09), 0 4px 12px rgba(0,0,0,0.06);
}

/* When reveal pulse class is applied, animate the pseudo-element for the R2 effect */
.tab.reveal-pulse::before{
  animation: revealPulse 1.05s ease forwards;
}

/* small keyframe for the reveal pulse (gentle scale + opacity flicker) */
@keyframes revealPulse {
  0% { transform: scale(0.96); opacity:0; }
  35% { transform: scale(1.06); opacity:1; }
  65% { transform: scale(1.02); opacity:0.95; }
  100% { transform: scale(1); opacity:0.95; }
}

/* Main wrapper */
.wrap{
  width:100%;
  max-width:var(--maxwidth);
  padding:28px;
  display:flex;
  justify-content:center;
}

/* Panel styles */
.panel{display:none; width:100%}
.panel.active{display:block}

/* Letter Card (Home) */
.letter-card{
  width:100%;
  background:var(--card);
  border-radius:12px;
  padding:26px;
  box-shadow:0 14px 40px var(--shadow);
  border:1px solid rgba(0,0,0,0.03);
  display:grid;
  grid-template-columns: 1fr 360px;
  gap:22px;
  align-items:start;
  transform: translateY(0);
}

/* Left column */
.left{
  padding:0 8px 8px 8px;
}
.heart-anim{
  width:40px; height:40px; margin-bottom:8px;
  display:flex; align-items:center;
}
.heart-shape{
  width:36px;height:36px;border-radius:6px; background:var(--accent);
  transform:rotate(-45deg);
  position:relative;
}
.heart-shape::before,
.heart-shape::after{
  content:""; position:absolute; background:var(--accent);
  width:36px;height:36px;border-radius:50%;
}
.heart-shape::before{ top:-18px; left:0}
.heart-shape::after{ left:18px; top:0}
.heart-shape{ animation: gentle-beat 3s infinite; }
@keyframes gentle-beat{
  0%,100%{ transform: rotate(-45deg) scale(1) }
  50%{ transform: rotate(-45deg) scale(1.06) }
}

/* Title */
.title{
  font-size:44px;
  margin:6px 0 18px 0;
  line-height:1.02;
  font-weight:700;
  color:var(--text);
}

/* Notes area */
.notes-area{
  background:transparent;
  min-height:90px;
  display:flex;
  align-items:center;
}
.note-placeholder{
  font-size:20px;
  color:var(--muted);
  margin:0;
}

/* Controls */
.controls{ margin-top:16px; }
.btn{
  padding:10px 18px;
  border-radius:8px;
  border:1px solid rgba(0,0,0,0.06);
  font-size:16px;
  cursor:pointer;
}
.btn.primary{
  background:var(--accent); color:#fff; border:none; box-shadow:0 8px 24px rgba(255,140,156,0.12);
}

/* Playlist container (right) */
.playlist-container{
  width:100%; height:360px; border-radius:10px; overflow:hidden;
  background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.02));
  box-shadow:0 6px 18px rgba(0,0,0,0.06);
}
.playlist-container iframe{
  width:100%; height:100%; border:0;
}

/* MESSAGE page styles: letter-style box narrow */
.message-wrapper{
  width:100%;
  display:flex;
  justify-content:center;
  padding:40px 10px;
}
.message-inner {
  width: 80%;
  max-width: 820px;
  min-height: 300px;
  background: rgba(255, 255, 255, 0.6);
  border-radius: 10px;
  padding: 28px;
  border: 1px solid rgba(0, 0, 0, 0.04);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
  font-size: 20px;
  line-height: 1.6;
  color: var(--text);
  overflow-y: auto;  /* Enable scrolling when content exceeds */
  max-height: 500px;  /* You can adjust this value to control the height */
  position: relative;  /* for heart placement */
}

/* Floating hearts container - moderate intensity */
#hearts{
  pointer-events:none;
  position:fixed;
  inset:0;
  z-index:0;
  overflow:hidden;
}
.heart-float{
  position:absolute;
  font-size:18px;
  color:var(--accent);
  opacity:0.9;
  transform:translateY(0) scale(1);
  animation: floatUp 6s linear forwards;
  filter:drop-shadow(0 8px 18px rgba(0,0,0,0.06));
}
@keyframes floatUp{
  0%{ transform:translateY(20px) scale(0.9); opacity:0.9 }
  50%{ opacity:0.9 }
  100%{ transform:translateY(-420px) scale(1.25); opacity:0.02 }
}

/* Hide Message tab initially (revealed via JS) */
#tab-message {
  display: none;
}

/* Message glow and doodle heart CSS (from previous plan) */
.message-glow {
  box-shadow: 0 12px 40px rgba(255,110,140,0.14), 0 2px 8px rgba(0,0,0,0.06);
  transition: box-shadow 0.6s ease;
}

.doodle-heart-wrap {
  width: 82px;
  height: 82px;
  position: absolute;
  right: 18px;
  bottom: 18px;
  transform-origin: center;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.45s ease, transform 0.45s ease;
}

.doodle-heart-done {
  opacity: 1;
  transform: scale(1.04);
  transition: transform 0.35s cubic-bezier(.2,.9,.3,1), opacity 0.35s ease;
}

.doodle-heart {
  filter: drop-shadow(0 6px 18px rgba(255,110,140,0.12));
}

/* responsive tweaks */
@media (max-width:980px){
  .letter-card{ grid-template-columns: 1fr; }
  .playlist-container{ height:260px; order:3; }
  .left{ order:2; }
  .controls{ order:4; display:flex; justify-content:center; width:100%;}
  .title{ font-size:32px; text-align:center; }
  .note-placeholder{ font-size:18px; text-align:center; }
  .message-inner{ width:94%; font-size:18px; }
}

@media (max-width:520px){
  .title{ font-size:26px }
  .playlist-container{ height:220px; }
  .note-placeholder{ font-size:16px; }
  .message-inner{ font-size:16px; padding:20px }
}
